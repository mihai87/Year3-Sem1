<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Proiect Sincretic 2019 - Informatizare cabinet medical</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
<div class="topbar">
	<select id="bloguriexistente" style="display:none" class="form-control">
	</select>
	<button type="button" class="btn btn-primary" id="resetblogslist" style="display:none">Reset</button>
</div><br />
<div class="meniusicontinut">
	<div class="meniu">
		<div class="btn-group-vertical">
		  <button type="button" class="btn btn-primary" id="adaugamedic"><b>+</b> Medic</button>
		  <button type="button" class="btn btn-primary" id="adaugacontractmedic"><b>+</b> Contract Medic</button>
		  <button type="button" class="btn btn-primary" id="adaugainterventie"><b>+</b> Interventii</button>
		  <button type="button" class="btn btn-primary" id="adaugapacient"><b>+</b> Fisa pacient</button>
		  <button type="button" class="btn btn-primary" id="adaugaconsultatie"><b>+</b> Consultatie</button>
		  <button type="button" class="btn btn-primary" id="adaugaincasare"><b>+</b> Incasare</button>
		  <button type="button" class="btn btn-primary" id="adaugaplatamedic"><b>+</b> Plata Medic</button>
		  <button type="button" class="btn btn-primary" id="adaugaprogramare"><b>+</b> Programare</button>
		  <button type="button" class="btn btn-primary" id="afisarefisapacient"><b>ARATA</b> Fisa Pacient</button>
		  <button type="button" class="btn btn-primary" id="afisarerestantieri"><b>ARATA</b> Pacienti Restantieri</button>
		  <button type="button" class="btn btn-primary" id="afisareprogramari"><b>ARATA</b> Programari</button>
		  <button type="button" class="btn btn-primary" id="afisareincasari"><b>ARATA</b> Incasari</button>
		  <button type="button" class="btn btn-primary" id="tiparirechitanta"><b>TIPARIRE</b> Chitanta</button>
		</div>
	</div>
	

	
	<div class="continut"> 
		<!--<div class="loader" style="display:none"></div>-->
		<div id = "formular_printare_chitanta" style = "display: none;">
			<select id="pacientchitanta" class="form-control">
				<option value="0" disabled selected>Alege pacientul pentru care se emite chitanta</option>
			</select>
			<select id="platachitanta" class="form-control">
				<option value="0" disabled selected>Alege plata pentru care se emite chitanta</option>
			</select>
			<br /><br />
	
			<button type="button" class="btn btn-primary" id="printarechitanta">Printeaza Chitanta</button>
			<br /><br />
			<div id = 'divchitanta'></div>
			
		</div>
		
		<div id = "arata_incasari" style = "display: none">
			<select id ='ziincasarelistare' class="form-control">
			<option value="0" disabled selected>Zi Incasare</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id ='lunaincasarelistare' class="form-control">
			<option value="0" disabled selected>Luna Incasare</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id ='anincasarelistare' class="form-control">
			<option value="0" disabled selected>An Incasare</option>
				<script>
					var date = new Date();
					var an_maxim = date.getFullYear()
					var an_minim = date.getFullYear() - 20 //pot fi verificate incasarile pe ultimii 20 de ani
					for(var i=an_minim; i<=an_maxim; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<br />
			<br />
			<button type="button" class="btn btn-primary" id="listareincasari">Listeaza Incasarile</button>
			<br /><br /><br />
			<div id = "incasari_listate"></div>
		</div>
		<div id = "arata_programari" style = "display: none">
			<select id ='ziprogramarelistare' class="form-control">
			<option value="0" disabled selected>Zi Programare</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id ='lunaprogramarelistare' class="form-control">
			<option value="0" disabled selected>Luna Programare</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id ='anprogramarelistare' class="form-control">
			<option value="0" disabled selected>An Programare</option>
				<script>
					var date = new Date();
					var an_maxim = date.getFullYear()+1
					var an_minim = date.getFullYear()
					for(var i=an_minim; i<=an_maxim; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<br />
			<br />
			<button type="button" class="btn btn-primary" id="listareprogramari">Listeaza programarile</button>
			<br /><br /><br />
			<div id = "programari_listate"></div>
		</div>
		
		<div id = "arata_restantieri" style = "display: none">
			
		</div>
		<div id = "arata_fisa_pacient" style = "display: none">
			
			<select id="pacientfisa" class="form-control">
				<option value="0" disabled selected>Alege pacientul pentru care se listeaza fisa</option>
			</select>
			<br /><br /><br /><br /><br />
			<div id = "fisa_listata" >
			
			</div><br /><br />
			<button type="button" class="btn btn-primary" id="printfisa">Printeaza Fisa pacientului</button>
		</div>
		
		<div id = "formular_ad_medic" style = "display: none;">
			<input type="text" id="cnpmedic" placeholder="CNP Medic" class="form-control"/>
			<input type="text" id="numemedic" placeholder="Nume Medic" class="form-control"/>
			<input type="text" id="prenumemedic" placeholder="Prenume Medic" class="form-control"/>	
			<select id="zinastere" class="form-control">
				<option value="0" disabled selected>Zi Nastere</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="lunanastere" class="form-control">
				<option value="0" disabled selected>Luna Nastere</option>
				<script>
					for(var i=1; i<=12; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="annastere" class="form-control">
				<option value="0" disabled selected>An Nastere</option>
				<script>
					var date = new Date();
					var an_maxim = date.getFullYear()-28 <!-- consideram ca un medic are minim 28 de ani-->
					var an_minim = an_maxim - 52 <!-- consideram ca un medic va profesa pana la maxim 80 de ani-->
					for(var i=an_minim; i<=an_maxim; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			</br>Detalii carte identitate medic: </br></br>
			<input type="text" id="seriecimedic" placeholder="Serie Carte Identitate Medic" class="form-control"/>
			<input type="text" id="numarcimedic" placeholder="Numar Carte Identitate Medic" class="form-control"/>
			</br>Adresa medic: </br></br>
			<input type="text" id="stradamedic" placeholder="Strada Medic" class="form-control"/>
			<input type="text" id="nrstradamedic" placeholder="Numar Strada Medic" class="form-control"/>
			<input type="text" id="blocmedic" placeholder="Bloc Medic" class="form-control"/>
			<input type="text" id="scaramedic" placeholder="Scara Medic" class="form-control"/>
			<input type="text" id="apmedic" placeholder="Apartament Medic" class="form-control"/>
			<input type="text" id="orasmedic" placeholder="Oras Medic" class="form-control"/><br />
			<button type="button" class="btn btn-primary" id="adaugamedicfinal">Inregistrare Medic</button>
			<br />
		</div>
		
		<div id = "formular_contract_medic" style = "display: none;">
			<select id="medic" class="form-control">
				<option value="0" disabled selected>Alege medicul pentru care se realizeaza contractul</option>
			</select>
			<input type="text" id="telefonmedic" placeholder="Telefon Medic" class="form-control"/>
			<input type="text" id="emailmedic" placeholder="Email Medic" class="form-control"/>
			<select id="ziangajare" class="form-control">
				<option value="0" disabled selected>Zi Angajare</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="lunaangajare" class="form-control">
				<option value="0" disabled selected>Luna Angajare</option>
				<script>
					for(var i=1; i<=12; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="anangajare" class="form-control">
				<option value="0" disabled selected>An Angajare</option>
				<script>
					var date = new Date();
					var an_maxim = date.getFullYear()+1 
					var an_minim = an_maxim - 5
					for(var i=an_minim; i<=an_maxim; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<input type="text" id="salariumedic" placeholder="Salariu Medic (RON)" class="form-control"/>
			<button type="button" class="btn btn-primary" id="finaladaugacontractmedic">Inregistrare Contract Medic</button>
			<br />
		</div>
		
		<div id = "formular_ad_interventie" style = "display: none;">
			<input type="text" id="numeinterventie" placeholder="Denumire Interventie" class="form-control"/>
			<input type="text" id="costmateriale" placeholder="Cost Materiale Interventie" class="form-control"/>
			<input type="text" id="tarif" placeholder="Tarif Materiale Interventie" class="form-control"/>	
			<button type="button" class="btn btn-primary" id="adaugainterventiefinal">Inregistrare Interventie</button>
			<br />
		</div>
		
		<div id = "formular_ad_pacient" style = "display: none;">
			<input type="text" id="numepacient" placeholder="Nume Pacient" class="form-control"/>
			<input type="text" id="prenumepacient" placeholder="Prenume Pacient" class="form-control"/>	
			<select id="zinasterepacient" class="form-control">
				<option value="0" disabled selected>Zi Nastere</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="lunanasterepacient" class="form-control">
				<option value="0" disabled selected>Luna Nastere</option>
				<script>
					for(var i=1; i<=12; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="annasterepacient" class="form-control">
				<option value="0" disabled selected>An Nastere</option>
				<script>
					var date = new Date();
					var an_maxim = date.getFullYear()-4 <!-- consideram ca un pacient are minim 4 de ani-->
					var an_minim = an_maxim - 86 <!-- consideram varsta unui pacient maxim 90 de ani-->
					for(var i=an_minim; i<=an_maxim; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			</br>Adresa Pacient: </br></br>
			<input type="text" id="stradapacient" placeholder="Strada Pacient" class="form-control"/>
			<input type="text" id="nrstradapacient" placeholder="Numar Strada Pacient" class="form-control"/>
			<input type="text" id="blocpacient" placeholder="Bloc Pacient" class="form-control"/>
			<input type="text" id="scarapacient" placeholder="Scara Pacient" class="form-control"/>
			<input type="text" id="appacient" placeholder="Apartament Pacient" class="form-control"/>
			<input type="text" id="oraspacient" placeholder="Oras Pacient" class="form-control"/><br />
			<input type="text" id="telefonpacient" placeholder="Telefon Pacient" class="form-control"/><br />
			<button type="button" class="btn btn-primary" id="adaugapacientfinal">Inregistrare Fisa Pacient</button>
			<br />
		</div>
		
		<div id = "formular_ad_consultatie" style = "display: none;">
			<select id="pacientconsultat" class="form-control">
				<option value="0" disabled selected>Alege pacientul pentru care se face consultatia</option>
			</select>
			<select id="medic_consultant" class="form-control">
				<option value="0" disabled selected>Alege medicul care a realizat consultatia</option>
			</select>
			<select id="interventie_consultatie" class="form-control">
				<option value="0" disabled selected>Alege interventia de la consultatie</option>
			</select>
			<input type="text" id="observatiiconsultatie" placeholder="Observatii Consultatii" class="form-control"/>	
			<button type="button" class="btn btn-primary" id="adaugaconsultatiefinal">Inregistrare Consultatie</button>
			<br />
		</div>
		
		<div id = "formular_ad_incasare" style = "display: none;">
			<select id="pacientincasat" class="form-control">
				<option value="0" disabled selected>Alege pacientul pentru care se face incasarea</option>
			</select>
			<select id="consultatie_platita" class="form-control">
				<option value="0" disabled selected>Alege consultatia pentru care se realizeaza plata</option>
			</select>
			<input type="text" id="valoareconsultatie" placeholder="Valoare plata (RON)" class="form-control"/>	
			<button type="button" class="btn btn-primary" id="incasarepacientfinal">Inregistrare Plata</button>
			<br />
		</div>
		
		<div id = "formular_ad_plata_medic" style = "display: none;">
			<select id="medic_platit" class="form-control">
				<option value="0" disabled selected>Alege medicul pentru care se realizeaza plata</option>
			</select>
			<input type="text" id="valoarebonus" placeholder="Valoare bonus (RON)" class="form-control"/>
			<input type="text" id="valoareplata" placeholder="Valoare plata incluzand bunusul (RON)" disabled class="form-control"/>
			
			<button type="button" class="btn btn-primary" id="adaugaincasarefinal">Inregistrare Plata Medic</button><br /><br />
			<div id = "fluturas"></div><br /><br />
			<button type="button" class="btn btn-primary" id="printfluturas">Printeaza fluturas</button>
			<br />
		</div>
		
		<div id = "formular_ad_programare" style = "display: none;">
			<select id="ziprogramare" class="form-control">
				<option value="0" disabled selected>Zi Programare</option>
				<script>
					for(var i=1; i<=31; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="lunaprogramare" class="form-control">
				<option value="0" disabled selected>Luna Programare</option>
				<script>
					for(var i=1; i<=12; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="anprogramare" class="form-control">
				<option value="0" disabled selected>An Programare</option>
				<script>
					var date = new Date();
					var an_maxim = date.getFullYear()+1
					var an_minim = date.getFullYear()
					for(var i=an_minim; i<=an_maxim; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="oraprogramare" class="form-control">
				<option value="0" disabled selected>Ora Programare</option>
				<script>
					for(var i=1; i<=23; i++){
						document.write("<option value='" + i + "'>" + i + "</option>")
					}
				</script>
			</select>
			<select id="minutprogramare" class="form-control">
				<option value="0" disabled selected>Ora Programare</option>
				<option value="1" >00</option>
				<option value="2" >30</option>
			</select>
			<select id="medic_programare" class="form-control">
				<option value="0" disabled selected>Alege medicul la care se face programarea</option>
			</select>
			<select id="pacient_programat" class="form-control">
				<option value="0" disabled selected>Alege pacientul pentru care se face programarea</option>
			</select>
			<button type="button" class="btn btn-primary" id="adaugaprogramarefinal">Inregistrare Programare</button>
			<br />
		</div>
		
	</div>
</div>
				
<script>
$("#tiparirechitanta").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','block');
	
	$("#pacientchitanta").empty();
	$("#pacientchitanta").append('<option value="0" disabled selected>Alege pacientul pentru care se emite chitanta</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "pacienti_existenti.php",
      success: function(response) {
				var pacienti = JSON.parse(response);
				var i = 0;
				while(pacienti[i]){
					$("#pacientchitanta").append('<option value="' + pacienti[i].numar_fisa + '">' + pacienti[i].prenume_pacient + ' ' + pacienti[i].nume_pacient + '</option>');
					i = i + 1;
				}
			}
		});
	
});

$('#pacientchitanta').change(function(){

	$("#platachitanta").empty();
	$("#platachitanta").append('<option value="0" disabled selected>Alege plata pentru care se emite chitanta</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "selectie_plati.php",
	  data:{
		 	'pacientchitanta': $('#pacientchitanta').val(),
			},
      success: function(response) {
				var plati = JSON.parse(response);
				var i = 0;
				while(plati[i]){
					$("#platachitanta").append('<option value="' + plati[i].id_incasare + '">' + plati[i].tip_interventie + ', din data: ' + plati[i].data_intocmire + '; Suma incasata: ' + plati[i].valoare_incasare + ' (RON)</option>');
					i = i + 1;
				}
			}
		});	
});

$('#platachitanta').change(function(){

	$("#divchitanta").empty();
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "selectie_plata.php",
	  data:{
		 	'platachitanta': $('#platachitanta').val(),
			},
      success: function(response) {
				var plata = JSON.parse(response);
				if(plata){
					$("#divchitanta").append('<b><i><u>Date personale pacient:</u></i></b> <br /><br />');
					$("#divchitanta").append('Numele pacientului: ');
					$("#divchitanta").append(plata.nume_pacient + ' ' + plata.prenume_pacient + '<br />');
					$("#divchitanta").append('Data nasterii pacientului: ');
					$("#divchitanta").append(plata.ziua_nasterii + '/' + plata.ziua_nasterii + '/' + plata.anul_nasterii + '<br />');
					$("#divchitanta").append('Adresa pacientului: ');
					$("#divchitanta").append('Strada: ' + plata.strada_pacient + ', numarul: ' + plata.nrstr_pacient + ', bloc: ' + plata.bloc_pacient + ', scara: ' + plata.scara_pacient + ', apartament: ' + plata.ap_pacient + ', oras: ' + plata.oras_pacient + ', telefon: ' + plata.telefon +'<br />');
					$("#divchitanta").append('<br /><br />Suma Platita (RON): ' + plata.valoare_incasare);
					$("#divchitanta").append('<br />Data efectuarii platii: ' + plata.data_incasare);
				}
			}
		});	
});

//urmeaza scriptul care permite printarea chitantei
$('#printarechitanta').click(function(){
	var divContents = $("#divchitanta").html();
    var printWindow = window.open('', '', 'height=800,width=600');
    printWindow.document.write('<html><head><title>Chitanta incasare plata pentru servicii medicale</title>');
    printWindow.document.write('</head><body >');
    printWindow.document.write(divContents);
    printWindow.document.write('</body></html>');
    printWindow.document.close();
    printWindow.print();
});

$("#afisareincasari").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','block');
	$("#formular_printare_chitanta").css('display','none');
	
	$("#incasari_listate").empty();
	
});

$('#listareincasari').click(function(){
	$("#incasari_listate").empty();
	$.ajax({
      type: "POST",
	  async: "false",
      url: "listare_incasari.php",
	  data: {'zi': $('#ziincasarelistare').val(),
			 'luna': $('#lunaincasarelistare').val(),
			 'an': $('#anincasarelistare').val()
				},
      success: function(response) {
			var incasari_totale = JSON.parse(response);
			$("#incasari_listate").append('<i><b><u>Suma Totala Incasata pe data selectata (RON):</u></b></i>  ' + incasari_totale);
			}
		});
	
});

$("#afisareprogramari").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','block');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	$("#programari_listate").empty();
	
});

$('#listareprogramari').click(function(){
	$("#programari_listate").empty();
	$.ajax({
      type: "POST",
	  async: "false",
      url: "listare_programari.php",
	  data: {'zi': $('#ziprogramarelistare').val(),
			 'luna': $('#lunaprogramarelistare').val(),
			 'an': $('#anprogramarelistare').val()
				},
      success: function(response) {
				var programari = JSON.parse(response);
				var i = 0;
				while(programari[i]){
					$("#programari_listate").append('<i><b><u>Pacient:</u></b></i>  ' + programari[i].nume_pacient + ' ' + programari[i].prenume_pacient + ', <i><b><u>Nume medic:</u></b></i>  ' + programari[i].nume_medic + ' ' + programari[i].prenume_medic + ', <i><b><u>ora:</u></b></i>  ' + programari[i].ora_programare + ((programari[i].ora_programare=1)?(':00'):(':30')) + '<br />');
					i = i + 1;
				}
			}
		});
	
});

$("#adaugamedic").click(function(){
	$("#formular_ad_medic").css('display','block');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
});
	
$("#adaugacontractmedic").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','block');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	$("#medic").empty();
	$("#medic").append('<option value="0" disabled selected>Alege medicul pentru care se realizeaza contractul</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "medici_existenti.php",
      success: function(response) {
				var medici = JSON.parse(response);
				var i = 0;
				while(medici[i]){
					$("#medic").append('<option value="' + medici[i].cnp_medic + '">' + medici[i].prenume_medic + ' ' + medici[i].nume_medic + '</option>');
					i = i + 1;
				}
			}
		});			
			
	
});
	
$("#adaugainterventie").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','block');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
});
	
$("#adaugapacient").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','block');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');

});

$("#adaugaconsultatie").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','block');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	$("#pacientconsultat").empty();
	$("#pacientconsultat").append('<option value="0" disabled selected>Alege pacientul pentru care se face consultatia</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "pacienti_existenti.php",
      success: function(response) {
				var pacienti = JSON.parse(response);
				var i = 0;
				while(pacienti[i]){
					$("#pacientconsultat").append('<option value="' + pacienti[i].numar_fisa + '">' + pacienti[i].prenume_pacient + ' ' + pacienti[i].nume_pacient + '</option>');
					i = i + 1;
				}
			}
		});	
	
	$("#medic_consultant").empty();
	$("#medic_consultant").append('<option value="0" disabled selected>Alege medicul care a realizat consultatia</option>');
		
	$.ajax({
      type: "POST",
	  async: "false",
      url: "medici_existenti.php",
      success: function(response) {
				var medici = JSON.parse(response);
				var i = 0;
				while(medici[i]){
					$("#medic_consultant").append('<option value="' + medici[i].cnp_medic + '">' + medici[i].prenume_medic + ' ' + medici[i].nume_medic + '</option>');
					i = i + 1;
				}
			}
		});	
	
	
	$("#interventie_consultatie").empty();
	$("#interventie_consultatie").append('<option value="0" disabled selected>Alege interventia de la consultatie</option>');
		
	$.ajax({
      type: "POST",
	  async: "false",
      url: "interventii_existente.php",
      success: function(response) {
				var interventii = JSON.parse(response);
				var i = 0;
				while(interventii[i]){
					$("#interventie_consultatie").append('<option value="' + interventii[i].tip_interventie + '">' + interventii[i].tip_interventie + ' ' + interventii[i].tarif_interventie + '</option>');
					i = i + 1;
				}
			}
		});	
	
	
});
	
$("#adaugaincasare").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','block');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	$("#consultatie_platita").empty();
	$("#consultatie_platita").append('<option value="0" disabled selected>Alege consultatia pentru care se realizeaza plata</option>');

	$("#pacientincasat").empty();
	$("#pacientincasat").append('<option value="0" disabled selected>Alege pacientul pentru care se face incasarea</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "pacienti_existenti.php",
      success: function(response) {
				var pacienti = JSON.parse(response);
				var i = 0;
				while(pacienti[i]){
					$("#pacientincasat").append('<option value="' + pacienti[i].numar_fisa + '">' + pacienti[i].prenume_pacient + ' ' + pacienti[i].nume_pacient + '</option>');
					i = i + 1;
				}
			}
		});	


	
	
});
	
$("#adaugaplatamedic").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','block');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	$('#fluturas').empty();
	$("#medic_platit").empty();
	$("#medic_platit").append('<option value="0" disabled selected>Alege medicul pentru care se realizeaza plata</option>');
		
	$.ajax({
      type: "POST",
	  async: "false",
      url: "medici_existenti.php",
      success: function(response) {
				var medici = JSON.parse(response);
				var i = 0;
				while(medici[i]){
					$("#medic_platit").append('<option value="' + medici[i].cnp_medic + '">' + medici[i].prenume_medic + ' ' + medici[i].nume_medic + '</option>');
					i = i + 1;
				}
			}
		});	
});

var salariu_de_baza_val = 0;
$("#medic_platit").change(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "selectie_medic.php",
	  data: {'cnp_medic': $("#medic_platit").val()},
      success: function(response) {
				var salariu_de_baza = JSON.parse(response);
				salariu_de_baza_val = salariu_de_baza.salariu_angajare;
				$('#valoareplata').val(salariu_de_baza.salariu_angajare);
			}
		});	
});

$('#valoarebonus').keyup(function(){
	$('#valoareplata').val('');
	$('#valoareplata').val(parseInt(salariu_de_baza_val) + parseInt($('#valoarebonus').val()));
});

/*10% * Sal brut"	"CASS
25% * Sal brut"	"Salariu brut
Sal incasat + CAS + CASS*/

$('#adaugaincasarefinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_plata_medic.php",
	  data:{
			'cnpmedic': $("#medic_platit").val(),
			'valoarebonus': $('#valoarebonus').val(),
			'valoareplata': $('#valoareplata').val(),
			},
      success: function(response) {
			if(response==1){
				alert('Plata medicului a fost inregistrata cu succes');
				$('#fluturas').empty();
				$('#fluturas').append("Fluturas Salariu Medic: <br /><br />" + $("#medic_platit").text() + "<br /><br />Venit Brut: " + $('#valoareplata').val() + 
				"<br>CASS[10%]: " + (0.1*parseInt($('#valoareplata').val())) + "<br>CAS[25%]: " + (0.25*parseInt($('#valoareplata').val()))+"<br /> Venit Net: " + (0.65*parseInt($('#valoareplata').val())));
			}else{
				alert(response);
			}
	  }
    });
});

$('#printfluturas').click(function(){
	var divContents = $("#fluturas").html();
    var printWindow = window.open('', '', 'height=800,width=600');
    printWindow.document.write('<html><head><title>Fluturas Salariu Medic</title>');
    printWindow.document.write('</head><body >');
    printWindow.document.write(divContents);
    printWindow.document.write('</body></html>');
    printWindow.document.close();
    printWindow.print();
});

$("#adaugaprogramare").click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','block');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	
	$("#medic_programare").empty();
	$("#medic_programare").append('<option value="0" disabled selected>Alege medicul la care se face programarea</option>');
	$("#pacient_programat").empty();
	$("#pacient_programat").append('<option value="0" disabled selected>Alege pacientul pentru care se face programarea</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "medici_existenti.php",
      success: function(response) {
				var medici = JSON.parse(response);
				var i = 0;
				while(medici[i]){
					$("#medic_programare").append('<option value="' + medici[i].cnp_medic + '">' + medici[i].prenume_medic + ' ' + medici[i].nume_medic + '</option>');
					i = i + 1;
				}
			}
		});	
	
	$("#pacient_programat").empty();
	$("#pacient_programat").append('<option value="0" disabled selected>Alege pacientul pentru care se face programarea</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "pacienti_existenti.php",
      success: function(response) {
				var pacienti = JSON.parse(response);
				var i = 0;
				while(pacienti[i]){
					$("#pacient_programat").append('<option value="' + pacienti[i].numar_fisa + '">' + pacienti[i].prenume_pacient + ' ' + pacienti[i].nume_pacient + '</option>');
					i = i + 1;
				}
			}
		});	
	
});

$('#afisarefisapacient').click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','block');
	$("#arata_restantieri").css('display','none');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	$("#pacientfisa").empty();
	$("#pacientfisa").append('<option value="0" disabled selected>Alege pacientul pentru care se listeaza fisa</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "pacienti_existenti.php",
      success: function(response) {
				var pacienti = JSON.parse(response);
				var i = 0;
				while(pacienti[i]){
					$("#pacientfisa").append('<option value="' + pacienti[i].numar_fisa + '">' + pacienti[i].prenume_pacient + ' ' + pacienti[i].nume_pacient + '</option>');
					i = i + 1;
				}
			}
		});	
	
});

$('#afisarerestantieri').click(function(){
	$("#formular_ad_medic").css('display','none');
	$("#formular_contract_medic").css('display','none');
	$("#formular_ad_interventie").css('display','none');
	$("#formular_ad_pacient").css('display','none');
	$("#formular_ad_consultatie").css('display','none');
	$("#formular_ad_incasare").css('display','none');
	$("#formular_ad_plata_medic").css('display','none');
	$("#formular_ad_programare").css('display','none');
	$("#arata_fisa_pacient").css('display','none');
	$("#arata_restantieri").css('display','block');
	$("#arata_programari").css('display','none');
	$("#arata_incasari").css('display','none');
	$("#formular_printare_chitanta").css('display','none');
	
	$("#arata_restantieri").empty();
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "selectie_restante.php",
      success: function(response) {
				var restante = JSON.parse(response);
				var i = 0;
				while(restante[i]){
					$("#arata_restantieri").append('Pacient: ' + restante[i].nume_pacient + ' ' + restante[i].nume_pacient + ', ' + restante[i].tip_interventie + ', data: ' + restante[i].data_intocmire + ', suma restanta: ' + restante[i].diferenta + ' (RON)<br />');
					i = i + 1;
				}
			}
		});
	
});

//script pentru extragerea informatiilor despre pacient din baza de date
$("#pacientfisa").change(function(){
	$("#fisa_listata").empty();//sterg continutul divului pentru a face loc datelor pacientului nou selectat
	$.ajax({
      type: "POST",
	  async: "false",
      url: "istoric_pacient.php",
	  data:{
		 	'pacientfisa': $('#pacientfisa').val(),
			},
      success: function(response) {
				var istoric = JSON.parse(response);
				var i = 0;
				if(istoric[0]){
					//afisez datele legate de pacient - adresa, nume, data nasterii, etc
					$("#fisa_listata").append('<b><i><u>Date personale pacient:</u></i></b> <br /><br />');
					$("#fisa_listata").append('Numele pacientului: ');
					$("#fisa_listata").append(istoric[0].nume_pacient + ' ' + istoric[0].prenume_pacient + '<br />');
					$("#fisa_listata").append('Data nasterii pacientului: ');
					$("#fisa_listata").append(istoric[0].ziua_nasterii + '/' + istoric[0].ziua_nasterii + '/' + istoric[0].anul_nasterii + '<br />');
					$("#fisa_listata").append('Adresa pacientului: ');
					$("#fisa_listata").append('Strada: ' + istoric[0].strada_pacient + ', numarul: ' + istoric[0].nrstr_pacient + ', bloc: ' + istoric[0].bloc_pacient + ', scara: ' + istoric[0].scara_pacient + ', apartament: ' + istoric[0].ap_pacient + ', oras: ' + istoric[0].oras_pacient + ', telefon: ' + istoric[0].telefon +'<br />');
					$("#fisa_listata").append('Inregistrat din: ' + istoric[0].data_fisa + '<br /><br /><br />');
					$("#fisa_listata").append('<b><i><u>Istoric consultatii pacient:</u></i></b> <br /><br />');
				}
				while(istoric[i]){
					$("#fisa_listata").append(istoric[i].data_intocmire + ': ' + istoric[i].tip_interventie + ', medic: ' + istoric[i].nume_medic + ' ' + istoric[i].prenume_medic + ', cu observatiile: ' + istoric[i].observatii + '<br />');
					i = i + 1;
				}
			}
		});	
});

//urmeaza scriptul care permite printarea fisei
$('#printfisa').click(function(){
	var divContents = $("#fisa_listata").html();
    var printWindow = window.open('', '', 'height=800,width=600');
    printWindow.document.write('<html><head><title>Fisa Pacient</title>');
    printWindow.document.write('</head><body >');
    printWindow.document.write(divContents);
    printWindow.document.write('</body></html>');
    printWindow.document.close();
    printWindow.print();
});

//urmeaza scripturile pentru scrierea in baza de date
$('#adaugamedicfinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_medic.php",
	  data:{
			'cnpmedic': $('#cnpmedic').val(),
			'numemedic': $('#numemedic').val(),
			'prenumemedic': $('#prenumemedic').val(),
			'zinastere': $('#zinastere').val(),
			'lunanastere': $('#lunanastere').val(),
			'annastere': $('#annastere').val(),
			'seriecimedic': $('#seriecimedic').val(),
			'numarcimedic': $('#numarcimedic').val(),
			'stradamedic': $('#stradamedic').val(),
			'nrstradamedic': $('#nrstradamedic').val(),
			'blocmedic': $('#blocmedic').val(),
			'scaramedic': $('#scaramedic').val(),
			'apmedic': $('#apmedic').val(),
			'orasmedic': $('#orasmedic').val()
			},
      success: function(response) {
			if(response==1){
				alert('Medicul a fost adaugat in baza de date!');
			}else{
				alert(response);
			}
	  }
    });
});
	
	
	
	
//adaugare interventie in baza de date
	
$('#adaugainterventiefinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_interventie.php",
	  data:{
			'numeinterventie': $('#numeinterventie').val(),
			'costmateriale': $('#costmateriale').val(),
			'tarif': $('#tarif').val(),
			},
      success: function(response) {
			if(response==1){
				alert('Adaugare interventie reusita');
			}else{
				alert(response);
			}
	  }
    });
});
	
	
//adaugare fisa pacient in baza de date
	
$('#adaugapacientfinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_fisa_pacient.php",
	  data:{
		    'numepacient': $('#numepacient').val(),
		    'prenumepacient': $('#prenumepacient').val(),
		    'zinasterepacient': $('#zinasterepacient').val(),
		    'lunanasterepacient': $('#lunanasterepacient').val(),
            'annasterepacient': $('#annasterepacient').val(),
		    'stradapacient': $('#stradapacient').val(),
		    'nrstradapacient': $('#nrstradapacient').val(),
		  	'blocpacient': $('#blocpacient').val(),
		  	'scarapacient': $('#scarapacient').val(),
		  	'appacient': $('#appacient').val(),
		  	'oraspacient': $('#oraspacient').val(),
		  	'telefonpacient': $('#telefonpacient').val()
			},
      success: function(response) {
			if(response==1){
				alert('Adaugare fisa pacient reusita');
			}else{
				alert(response);
			}
	  }
    });
});

$('#finaladaugacontractmedic').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_contract_medic.php",
	  data:{
		    'cnpmedic': $('#medic').val(),
		    'telefonmedic': $('#telefonmedic').val(),
		    'emailmedic': $('#emailmedic').val(),
		    'ziangajare': $('#ziangajare').val(),
            'lunaangajare': $('#lunaangajare').val(),
		    'anangajare': $('#anangajare').val(),
		    'salariumedic': $('#salariumedic').val()},
      success: function(response) {
			if(response==1){
				alert('Adaugare contract medic reusita');
			}else{
				alert(response);
			}
	  }
    });
});

// Adauga programare
	
$('#adaugaprogramarefinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_programare.php",
	  data:{
			'ziprogramare': $('#ziprogramare').val(),
			'lunaprogramare': $('#lunaprogramare').val(),
			'anprogramare': $('#anprogramare').val(),
			'oraprogramare': $('#oraprogramare').val(),
			'minutprogramare': $('#minutprogramare').val(),
			'medic_programare': $('#medic_programare').val(),
			'pacient_programat': $('#pacient_programat').val(),
			},
      success: function(response) {
			if(response==1){
				alert('Programarea a fost adaugat in baza de date!');
			}else{
				alert(response);
			}
	  }
    });
});

	// Adauga plata medic

$('#adaugaplatamedicfinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_plata_medic.php",
	  data:{
		 	'cnpmedic': $('#medic_platit').val(),
			'valoarebonus': $('#valoarebonus').val(),
			'valoareplata': $('#valoareplata').val(),
			},
      success: function(response) {
			if(response==1){
				alert('Plata medic a fost adaugata in baza de date!');
			}else{
				alert(response);
			}
	  }
    });
});

// Adauga consultatie

$('#adaugaconsultatiefinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "adauga_consultatie.php",
	  data:{
		 	'pacientconsultat': $('#pacientconsultat').val(),
			'medic_consultant': $('#medic_consultant').val(),
			'interventie_consultatie': $('#interventie_consultatie').val(),
			'observatiiconsultatie': $('#observatiiconsultatie').val(),
			},
      success: function(response) {
			if(response==1){
				alert('Consultatia a fost adaugata in baza de date!');
			}else{
				alert(response);
			}
	  }
    });
});
	
	
	
	
	// Transmitere fise pacient catre baza de date si returnarea doar consultatiilor aferente acelei fise de pacient
	
$('#pacientincasat').change(function(){

	$("#consultatie_platita").empty();
	$("#consultatie_platita").append('<option value="0" disabled selected>Alege consultatia pentru care se realizeaza plata</option>');
	
	$.ajax({
      type: "POST",
	  async: "false",
      url: "selectie_consultatii.php",
	  data:{
		 	'pacientincasat': $('#pacientincasat').val(),
			},
      success: function(response) {
				var consultatii = JSON.parse(response);
				var i = 0;
				while(consultatii[i]){
					$("#consultatie_platita").append('<option value="' + consultatii[i].id_consultatie + '">' + consultatii[i].data_intocmire + ': ' + consultatii[i].tip_interventie + ' Restant: ' + consultatii[i].diferenta + ' (RON)</option>');
					i = i + 1;
				}
			}
		});	
});
	
// Adauga incasare

	$('#incasarepacientfinal').click(function(){
	$.ajax({
      type: "POST",
	  async: "false",
      url: "inregistrare_plata.php",
	  data:{
		 	'consultatie_platita': $('#consultatie_platita').val(),
			'valoareconsultatie': $('#valoareconsultatie').val(),
			},
      success: function(response) {
			if(response==1){
				alert('Plata de catre pacient a fost adaugata in baza de date!');
			}else{
				alert(response);
			}
	  }
    });
});

</script>
</body>
</html>
